{% extends "base.html" %}

{% block title %}ETL Builder - Sources{% endblock %}

{% block content %}
<section>
    <h2>Data Sources</h2>
    <p>
        Manage your raw data inputs. Open a source to work on it in memory, then run validation and basic cleaning.
    </p>

    <h3>Existing Sources</h3>

    <div id="sources-table-container">
        {% include "partials/sources_table.html" %}
    </div>

    <hr>

    <h3>Upload CSV</h3>

    <form
        id="csv-upload-form"
        hx-post="/sources/upload"
        hx-target="#preview-area"
        hx-swap="innerHTML"
        hx-encoding="multipart/form-data"
        enctype="multipart/form-data"
        method="post"
    >
        <label for="csv_file">Choose CSV file:</label>
        <input type="file" id="csv_file" name="file" accept=".csv" required>
          <label for="skip_rows">
        Skip top rows when reading CSV:
        <input
            type="number"
            id="skip_rows"
            name="skip_rows"
            value="0"
            min="0"
        >
    </label>
        <button type="submit">Upload &amp; Preview</button>
    </form>

    <hr>

    <div id="preview-area">
        <p>No data loaded yet. Upload a CSV or open a source to see a preview.</p>
    </div>
</section>
{% endblock %}
